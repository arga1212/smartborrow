{% extends 'base.html' %}
{% block title %}Manajemen Ruangan - Asistio{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
<h1>Manajemen Ruangan</h1>
<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#tambahRuanganModal"><i class="bi bi-plus-circle-fill me-2"></i>Tambah Ruangan Baru</button>
</div>
<div class="card"><div class="card-body">
<table class="table table-striped">
<thead><tr><th>ID</th><th>Nama Ruangan</th><th>Deskripsi</th><th>Aksi</th></tr></thead>
<tbody>
{% for ruangan in list_ruangan %}
<tr>
<td>{{ ruangan.id }}</td><td>{{ ruangan.nama_ruangan }}</td><td>{{ ruangan.deskripsi }}</td>
<td>
<button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#editRuanganModal-{{ ruangan.id }}">Edit</button>
<form action="{{ url_for('hapus_ruangan', id=ruangan.id) }}" method="POST" class="d-inline" onsubmit="return confirm('Yakin ingin menghapus?');"><button type="submit" class="btn btn-danger btn-sm">Hapus</button></form>
</td>
</tr>
<!-- Edit Modal -->
<div class="modal fade" id="editRuanganModal-{{ ruangan.id }}"><div class="modal-dialog"><div class="modal-content">
<form action="{{ url_for('edit_ruangan', id=ruangan.id) }}" method="POST">
<div class="modal-header"><h5 class="modal-title">Edit Ruangan</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
<div class="modal-body">
<div class="mb-3"><label class="form-label">Nama Ruangan</label><input type="text" name="nama_ruangan" class="form-control" value="{{ ruangan.nama_ruangan }}" required></div>
<div class="mb-3"><label class="form-label">Deskripsi</label><textarea name="deskripsi" class="form-control">{{ ruangan.deskripsi }}</textarea></div>
</div>
<div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button><button type="submit" class="btn btn-primary">Simpan</button></div>
</form></div></div></div>
{% endfor %}
</tbody></table>
</div></div>
<!-- Tambah Modal -->
<div class="modal fade" id="tambahRuanganModal"><div class="modal-dialog"><div class="modal-content">
<form action="{{ url_for('ruangan') }}" method="POST">
<div class="modal-header"><h5 class="modal-title">Tambah Ruangan Baru</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
<div class="modal-body">
<div class="mb-3"><label class="form-label">Nama Ruangan</label><input type="text" name="nama_ruangan" class="form-control" required></div>
<div class="mb-3"><label class="form-label">Deskripsi</label><textarea name="deskripsi" class="form-control" placeholder="(Opsional) Contoh: Kapasitas 50 orang, ada AC"></textarea></div>
</div>
<div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button><button type="submit" class="btn btn-primary">Tambah</button></div>
</form></div></div></div>
{% endblock %}